<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Dashboard - Content</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #0d1117; 
            --text-color: #c9d1d9;
            --status-red: #ff7b72;
            --status-amber: #d29922;
            --status-green: #3fb950;
            --safe-margin: 5vw;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'JetBrains Mono', monospace;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none; 
        }

        .container {
            width: 100%;
            height: 100%;
            padding: var(--safe-margin);
            max-width: 1920px;
            max-height: 1080px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
        }

        /* --- ACTIVE VIEW --- */
        #active-view {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            height: 100%;
            width: 100%;
        }

        .title-display {
            font-size: 3rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 2px solid #30363d;
            padding-bottom: 20px;
            width: 100%;
            text-align: center;
        }

        /* COUNTDOWN ALIGNMENT */
        .countdown-grid {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1vw;
        }

        .time-block {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 12vw; 
        }

        .number {
            font-size: 8vw;
            font-weight: 700;
            line-height: 1;
            text-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .label {
            font-size: 1rem;
            opacity: 0.6;
            margin-top: 15px;
            letter-spacing: 2px;
        }

        .separator {
            font-size: 8vw;
            font-weight: 700;
            line-height: 1;
            margin-top: -3vw;
            opacity: 0.3;
        }

        /* REMARKS & TICKER AREA */
        .bottom-section {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .remarks-display {
            font-size: 1.5rem;
            opacity: 0.9;
            background: #161b22;
            padding: 15px 40px;
            border-radius: 6px;
            border-left: 5px solid transparent;
            text-align: center;
            min-width: 50%;
        }

        /* TICKER ANIMATION */
        .ticker-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.03);
            border-top: 1px solid #30363d;
            border-bottom: 1px solid #30363d;
            overflow: hidden;
            white-space: nowrap;
            padding: 12px 0;
        }

        .ticker-text {
            display: inline-block;
            font-size: 1.2rem;
            color: var(--text-color);
            opacity: 0.7;
            padding-left: 100%;
            animation: ticker-move 25s linear infinite;
        }

        @keyframes ticker-move {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }

        /* --- EXPIRED VIEW --- */
        #expired-view {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            width: 100%;
            text-align: center;
        }

        .expired-header {
            font-size: 2rem;
            text-transform: uppercase;
            color: var(--status-red);
            margin-bottom: 20px;
            letter-spacing: 4px;
        }

        .expired-time {
            font-size: 6rem;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 40px;
        }

        .expired-title {
            font-size: 2rem;
            opacity: 0.7;
        }

        /* Color States */
        .color-red { color: var(--status-red); text-shadow: 0 0 15px rgba(255, 123, 114, 0.4); }
        .color-amber { color: var(--status-amber); text-shadow: 0 0 15px rgba(210, 153, 34, 0.4); }
        .color-green { color: var(--status-green); text-shadow: 0 0 15px rgba(63, 185, 80, 0.4); }
        
        .border-red { border-left-color: var(--status-red); }
        .border-amber { border-left-color: var(--status-amber); }
        .border-green { border-left-color: var(--status-green); }

    </style>
</head>
<body>

    <div class="container">
        
        <div id="active-view">
            <div class="title-display" id="main-title">INITIATING...</div>
            
            <div class="countdown-grid">
                <div class="time-block">
                    <div class="number" id="days">00</div>
                    <div class="label">DAYS</div>
                </div>
                <div class="separator">:</div>
                <div class="time-block">
                    <div class="number" id="hours">00</div>
                    <div class="label">HOURS</div>
                </div>
                <div class="separator">:</div>
                <div class="time-block">
                    <div class="number" id="minutes">00</div>
                    <div class="label">MINS</div>
                </div>
                <div class="separator">:</div>
                <div class="time-block">
                    <div class="number" id="seconds">00</div>
                    <div class="label">SECS</div>
                </div>
            </div>

            <div class="bottom-section">
                <div class="remarks-display" id="remarks">...</div>
                
                <div class="ticker-container">
                    <div class="ticker-text" id="ticker-content"></div>
                </div>
            </div>
        </div>

        <div id="expired-view">
            <div class="expired-header">DEADLINE ACHIEVED</div>
            <div class="expired-time" id="final-timestamp">0000-00-00 00:00</div>
            <div class="expired-title" id="expired-title-text">PROJECT TITLE</div>
        </div>

    </div>

    <script>
        const els = {
            activeView: document.getElementById('active-view'),
            expiredView: document.getElementById('expired-view'),
            title: document.getElementById('main-title'),
            remarks: document.getElementById('remarks'),
            ticker: document.getElementById('ticker-content'),
            finalTime: document.getElementById('final-timestamp'),
            expiredTitle: document.getElementById('expired-title-text'),
            days: document.getElementById('days'),
            hours: document.getElementById('hours'),
            minutes: document.getElementById('minutes'),
            seconds: document.getElementById('seconds')
        };

        async function init() {
            try {
                // Fetch JSON from the same folder
                const response = await fetch('config.json');
                if (!response.ok) throw new Error("Config not found");
                const config = await response.json();
                
                renderDashboard(config);
            } catch (err) {
                console.error(err);
                els.title.innerText = "LOAD ERROR";
                els.remarks.innerText = "> Ensure running on web server & config.json exists.";
            }
        }

        function renderDashboard(config) {
            // Text values
            els.title.innerText = config.title;
            els.remarks.innerText = "> " + config.remarks;
            els.ticker.innerText = config.ticker || "";
            els.expiredTitle.innerText = config.title;

            // Apply Status Color Classes
            const status = config.status.toLowerCase();
            const colorClass = `color-${status}`;
            const borderClass = `border-${status}`;
            
            els.remarks.classList.add(borderClass);
            [els.days, els.hours, els.minutes, els.seconds].forEach(el => el.classList.add(colorClass));
            document.querySelectorAll('.separator').forEach(el => el.classList.add(colorClass));

            // Adjust ticker speed based on length (approx 5 seconds per 100 chars)
            if (config.ticker) {
                const duration = Math.max(15, config.ticker.length / 10);
                els.ticker.style.animationDuration = `${duration}s`;
            }

            // Logic
            startCountdown(config.deadline);
            if (config.reloadMinutes > 0) {
                setTimeout(() => window.location.reload(), config.reloadMinutes * 60000);
            }
        }

        function startCountdown(deadlineStr) {
            const target = new Date(deadlineStr.replace(" ", "T")).getTime();

            const interval = setInterval(() => {
                const now = new Date().getTime();
                const dist = target - now;

                if (dist < 0) {
                    clearInterval(interval);
                    showExpiredState(new Date(target));
                    return;
                }

                els.days.innerText = pad(Math.floor(dist / (1000 * 60 * 60 * 24)));
                els.hours.innerText = pad(Math.floor((dist % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));
                els.minutes.innerText = pad(Math.floor((dist % (1000 * 60 * 60)) / (1000 * 60)));
                els.seconds.innerText = pad(Math.floor((dist % (1000 * 60)) / 1000));
            }, 1000);
        }

        function showExpiredState(dateObj) {
            els.activeView.style.display = 'none';
            els.expiredView.style.display = 'flex';
            const dateStr = dateObj.toISOString().split('T')[0];
            const timeStr = dateObj.toTimeString().split(' ')[0].substring(0, 5);
            els.finalTime.innerText = `${dateStr} ${timeStr}`;
        }

        function pad(n) { return n < 10 ? "0" + n : n; }

        init();
    </script>
</body>
</html>